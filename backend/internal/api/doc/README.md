## Clean Architecture

This project follows the principles of Clean Architecture, 
ensuring that the core business logic is independent of external frameworks, databases, and other I/O components. 
The architecture promotes separation of concerns, making the system more maintainable and scalable.

![The Clean Architecture](clean_architecture.png)
> Chapter 22, Figure 22.1: The clean architecture. This image instance was copied from Uncle Bob’s article [here](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html).


---

## Directory Structure
```bash
.
├── domain
│   ├── model # Entities
│   └── repository # Data Access Interface<I(Interface)>
├── infra
│   └── repository # Data Access
├── injector
│   └── wire.go
├── interfaces
│   └── controller # Controller
└── usecase
    ├── dto # DTO (DataTransferObject)
    │   ├── input # Input Data<DS(Data Structure)>
    │   └── output # Output Data<DS>
    └── interactor.go 
    # Usecase Interactor:𝑈
    # InputBoundary:𝐼𝐵
    # OutputBoundary:𝑂𝐵
    # 𝑈 ∈ Impl(𝐼𝐵 ∪ 𝑂𝐵)
```

### Corresponding Class Diagrams

![Clean Boundary](clean_boundary.jpg)
> Chapter 22, Figure 22.2: A typical scenario for a web-based Java system utilizing a database

---

## Layer Overview

### Entities (domain)
Located in the `domain` directory, the entities represent the core business objects and rules. 
This layer is independent of any other layers and frameworks.

- **Model**: Contains the business entities (e.g., message.go). 
- **Repository**: Contains abstract interfaces for data access (e.g., IMessageRepository).  
These interfaces are defined here to prevent the `usecase` layer from depending on the interface adapters.

> [!NOTE]
> Typically, `repository` is part of the interface adapters layer as `gateways`.  
> However, to avoid the `usecase` layer depending on the interface adapters, we define repository interfaces in the `domain` layer.

#### Dependencies
- No dependencies

### Use Cases (usecase)

Located in the `usecase` directory, this layer contains the application-specific business rules.  
It orchestrates the flow of data to and from the entities and leverages the interfaces defined in the `domain` layer.

- **Interactor**: Contains the business logic that interacts with the entities.
- **DTO**: Data Transfer Objects used for input and output (e.g., input and output directories).

#### Dependencies
- domain
- usecase

### Interface Adapters (interfaces)

Located in the api/interfaces directory,  
this layer converts data from the format most convenient for the use cases and entities to the format most convenient for external agents such as databases and the web.

- **Controllers**: Handle the HTTP requests and responses, interacting with the use cases.

#### Dependencies
- domain
- usecase

### Frameworks & Drivers (infra)

Located in the `infra` directory, this layer contains the framework and driver code,  
such as database implementations, external APIs.

- **Model**: Contains database-specific models generated by `gorm/gen` (e.g., messages.gen.go).
- **Repository**: Implements the repository interfaces defined in the domain layer using specific frameworks (e.g., GORM for database operations).

#### Dependencies
- domain

### Dependency Injection (injector) 

Located in the `injector` directory, this layer manages dependency injection configurations.  
This directory is unrelated to Clean Architecture.

- **Wire**: Configures and initializes the dependencies using Google Wire (e.g., wire.go).